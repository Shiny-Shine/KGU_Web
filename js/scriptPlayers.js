const playersData = {
  "1": [
    { name: "1구단 선수1", img: "./img/playerSE/DF1.png", comments: [], likes: 0 },
    { name: "1구단 선수2", img: "./img/playerSE/DF2.png", comments: [], likes: 0 },
    { name: "1구단 선수3", img: "./img/playerSE/DF3.png", comments: [], likes: 0 },
    { name: "1구단 선수4", img: "./img/playerSE/DF4.png", comments: [], likes: 0 },
    { name: "1구단 선수5", img: "./img/playerSE/DF5.png", comments: [], likes: 0 },
    { name: "1구단 선수6", img: "./img/playerSE/DF6.png", comments: [], likes: 0 },
    { name: "1구단 선수7", img: "./img/playerSE/DF7.png", comments: [], likes: 0 },
    { name: "1구단 선수8", img: "./img/playerSE/DF8.png", comments: [], likes: 0 },
    { name: "1구단 선수9", img: "./img/playerSE/DF9.png", comments: [], likes: 0 },
    { name: "1구단 선수10", img: "./img/playerSE/DF10.png", comments: [], likes: 0 }
  ],

"2": [
  { name: "2구단 선수1", img: "./img/playerJB/DF1.png", comments: [], likes: 0 },
  { name: "2구단 선수2", img: "./img/playerJB/DF2.png", comments: [], likes: 0 },
  { name: "2구단 선수3", img: "./img/playerJB/DF3.png", comments: [], likes: 0 },
  { name: "2구단 선수4", img: "./img/playerJB/DF4.png", comments: [], likes: 0 },
  { name: "2구단 선수5", img: "./img/playerJB/DF5.png", comments: [], likes: 0 },
  { name: "2구단 선수6", img: "./img/playerJB/DF6.png", comments: [], likes: 0 },
  { name: "2구단 선수7", img: "./img/playerJB/DF7.png", comments: [], likes: 0 },
  { name: "2구단 선수8", img: "./img/playerJB/DF8.png", comments: [], likes: 0 },
  { name: "2구단 선수9", img: "./img/playerJB/DF9.png", comments: [], likes: 0 },
  { name: "2구단 선수10", img: "./img/playerJB/DF10.png", comments: [], likes: 0 }
],

"3": [
  { name: "3구단 선수1", img: "./img/playerDJ/DF1.jpg", comments: [], likes: 0 },
  { name: "3구단 선수2", img: "./img/playerDJ/DF2.jpg", comments: [], likes: 0 },
  { name: "3구단 선수3", img: "./img/playerDJ/DF3.jpg", comments: [], likes: 0 },
  { name: "3구단 선수4", img: "./img/playerDJ/DF4.jpg", comments: [], likes: 0 },
  { name: "3구단 선수5", img: "./img/playerDJ/DF5.jpg", comments: [], likes: 0 },
  { name: "3구단 선수6", img: "./img/playerDJ/DF6.jpg", comments: [], likes: 0 },
  { name: "3구단 선수7", img: "./img/playerDJ/DF7.jpg", comments: [], likes: 0 },
  { name: "3구단 선수8", img: "./img/playerDJ/DF8.jpg", comments: [], likes: 0 },
  { name: "3구단 선수9", img: "./img/playerDJ/DF9.jpg", comments: [], likes: 0 },
  { name: "3구단 선수10", img: "./img/playerDJ/DF10.jpg", comments: [], likes: 0 }
],

"4": [
  { name: "4구단 선수1", img: "./img/playerAY/DF1.png", comments: [], likes: 0 },
  { name: "4구단 선수2", img: "./img/playerAY/DF2.png", comments: [], likes: 0 },
  { name: "4구단 선수3", img: "./img/playerAY/DF3.png", comments: [], likes: 0 },
  { name: "4구단 선수4", img: "./img/playerAY/DF4.png", comments: [], likes: 0 },
  { name: "4구단 선수5", img: "./img/playerAY/DF5.png", comments: [], likes: 0 },
  { name: "4구단 선수6", img: "./img/playerAY/DF6.png", comments: [], likes: 0 },
  { name: "4구단 선수7", img: "./img/playerAY/DF7.png", comments: [], likes: 0 },
  { name: "4구단 선수8", img: "./img/playerAY/DF8.png", comments: [], likes: 0 },
  { name: "4구단 선수9", img: "./img/playerAY/DF9.png", comments: [], likes: 0 },
  { name: "4구단 선수10", img: "./img/playerAY/DF10.png", comments: [], likes: 0 }
],

  "5": [
    { name: "5구단 선수1", img: "https://via.placeholder.com/300x200?text=5구단+선수1", comments: [], likes: 0 },
    { name: "5구단 선수2", img: "https://via.placeholder.com/300x200?text=5구단+선수2", comments: [], likes: 0 },
    { name: "5구단 선수3", img: "https://via.placeholder.com/300x200?text=5구단+선수3", comments: [], likes: 0 },
    { name: "5구단 선수4", img: "https://via.placeholder.com/300x200?text=5구단+선수4", comments: [], likes: 0 },
    { name: "5구단 선수5", img: "https://via.placeholder.com/300x200?text=5구단+선수5", comments: [], likes: 0 },
    { name: "5구단 선수6", img: "https://via.placeholder.com/300x200?text=5구단+선수6", comments: [], likes: 0 },
    { name: "5구단 선수7", img: "https://via.placeholder.com/300x200?text=5구단+선수7", comments: [], likes: 0 },
    { name: "5구단 선수8", img: "https://via.placeholder.com/300x200?text=5구단+선수8", comments: [], likes: 0 },
    { name: "5구단 선수9", img: "https://via.placeholder.com/300x200?text=5구단+선수9", comments: [], likes: 0 },
    { name: "5구단 선수10", img: "https://via.placeholder.com/300x200?text=5구단+선수10", comments: [], likes: 0 }
  ],
  "6": [],
  "7": [],
  "8": [],
  "9": [],
  "10": [],
  "11": [],
  "12": []
};



// function selectTeam(teamId) {
//   const list = document.getElementById("playerList");
//   list.innerHTML = "";

//   list.scrollTop = 0;

//   playersData[teamId].forEach((player, index) => {
//     const playerEl = document.createElement("div");
//     playerEl.className = "player";

//     playerEl.innerHTML = `
//         <div>
//           <img src="${player.img}" alt="${player.name}">
//           <div class="likeSection">
//             <button onclick="likePlayer(${teamId}, ${index}, this)">
//               <span class="heart">♡</span>
//             </button>
//             <span>${player.likes}</span>
//           </div>
//         </div>
//         <div style="flex: 1;">
//           <div class="commentBox" id="commentBox-${teamId}-${index}"></div>
//           <div style="display: flex; gap: 5px; margin-top: 10px;">
//             <input
//               type="text"
//               placeholder="댓글 작성..."
//               onkeydown="addComment(event, ${teamId}, ${index})"
//               style="flex: 1; padding: 5px;"
//               id="commentInput-${teamId}-${index}"
//             />
//             <button onclick="submitComment(${teamId}, ${index})" style="padding: 5px 10px;">작성</button>
//           </div>
//         </div>
//       `;
//     list.appendChild(playerEl);
//   });
// }
function selectTeam(teamId) {
  // 버튼 선택 상태 업데이트
  const buttons = document.querySelectorAll("#selectGudan button");
  buttons.forEach(btn => {
    if (btn.dataset.teamid === String(teamId)) {
      btn.classList.add("selected");
    } else {
      btn.classList.remove("selected");
    }
  });

  const list = document.getElementById("playerList");
  list.innerHTML = "";

  list.scrollTop = 0;

  playersData[teamId].forEach((player, index) => {
    const playerEl = document.createElement("div");
    playerEl.className = "player";

    playerEl.innerHTML = `
        <div>
          <img src="${player.img}" alt="${player.name}">
          <div class="likeSection">
            <button onclick="likePlayer(${teamId}, ${index}, this)">
              <span class="heart" style="color: #bbb;">♥</span>
            </button>
            <span>${player.likes}</span>
          </div>
        </div>
        <div style="flex: 1;">
          <div class="commentBox" id="commentBox-${teamId}-${index}"></div>
          <div style="display: flex; gap: 5px; margin-top: 10px;">
            <input
              type="text"
              placeholder="닉네임 입력..."
              style="padding: 5px; width: 120px;"
              id="nicknameInput-${teamId}-${index}"
            />
            <input
              type="text"
              placeholder="댓글 작성..."
              onkeydown="addComment(event, ${teamId}, ${index})"
              style="flex: 1; padding: 5px;"
              id="commentInput-${teamId}-${index}"
            />
            <button onclick="submitComment(${teamId}, ${index})" style="padding: 5px 10px;">작성</button>
          </div>
        </div>
      `;
    list.appendChild(playerEl);
  });
}


function formatDateTime() {
  const now = new Date();
  const pad = (n) => n.toString().padStart(2, "0");
  const year = now.getFullYear();
  const month = pad(now.getMonth() + 1);
  const day = pad(now.getDate());
  const hour = pad(now.getHours());
  const minute = pad(now.getMinutes());
  return `${year}-${month}-${day} ${hour}:${minute}`;
}

function submitComment(teamId, playerIndex) {
  const nicknameInput = document.getElementById(`nicknameInput-${teamId}-${playerIndex}`);
  const commentInput = document.getElementById(`commentInput-${teamId}-${playerIndex}`);
  const nickname = nicknameInput.value.trim();
  const commentText = commentInput.value.trim();
  
  if (nickname === "" || commentText === "") {
    alert("닉네임과 댓글을 모두 입력해주세요.");
    return;
  }

  const timestamp = formatDateTime();
  const player = playersData[teamId][playerIndex];
  player.comments.push({ nickname, text: commentText, timestamp });

  const box = document.getElementById(`commentBox-${teamId}-${playerIndex}`);
  const commentDiv = document.createElement("div");
  commentDiv.className = "comment";
  commentDiv.innerHTML = `
    <div style="margin-bottom: 5px;">
      <span style="font-weight: bold; color: #333;">${nickname}</span>
      <span style="font-size: 0.8em; color: gray; margin-left: 10px;">작성일시: ${timestamp}</span>
    </div>
    <div style="padding-left: 10px; color: #555;">
      ${commentText}
    </div>
  `;
  box.prepend(commentDiv); // 최신순
  nicknameInput.value = "";
  commentInput.value = "";
}

function addComment(event, teamId, playerIndex) {
  if (event.key === "Enter") {
    submitComment(teamId, playerIndex);
  }
}

function likePlayer(teamId, playerIndex, button) {
  const player = playersData[teamId][playerIndex];
  const heart = button.querySelector(".heart");

  if (!button.dataset.liked || button.dataset.liked === "false") {
    player.likes++;
    heart.textContent = "♥";        // 속이 채워진 하트
    heart.style.color = "#f88";     // 연한 붉은색
    button.dataset.liked = "true";
  } else {
    player.likes--;
    heart.textContent = "♥";        // 속이 채워진 하트 유지
    heart.style.color = "#bbb";     // 연한 회색
    button.dataset.liked = "false";
  }

  button.nextElementSibling.textContent = player.likes;
}